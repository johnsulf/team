---
import { Image } from 'astro:assets';
import { getCollection } from 'astro:content';

const allMembers = await getCollection('team');
const teamMembers = allMembers.sort((a, b) => a.data.order - b.data.order);
---

<section class="section-padding section-alt bg-noise">
  <div class="container mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
    <div class="text-center max-w-3xl mx-auto mb-12 md:mb-16">
      <h2 class="mb-4">Møt folkene i Team Bergen?</h2>
      <p class="lead">
        Fire spillere med ulik bakgrunn, men felles mål: å bli bedre og ha det
        gøy med diskgolf.
      </p>
    </div>

    <div
      class="grid grid-cols-2 md:grid-cols-4 gap-4 md:gap-6 max-w-4xl mx-auto"
    >
      {
        teamMembers.map((member, index) => (
          <a
            href={`/team#${member.slug}`}
            class={`card bg-base-100 card-hover animate-fade-up stagger-${index + 1} group`}
          >
            <figure class="p-4 pb-0">
              <div class="aspect-square w-full overflow-hidden rounded-xl">
                {member.data.image ? (
                  <Image
                    src={member.data.image}
                    alt={member.data.name}
                    width={300}
                    height={300}
                    class="w-full h-full object-cover team-image transition-transform duration-300 group-hover:scale-105"
                  />
                ) : (
                  <div class="bg-base-300 w-full h-full flex items-center justify-center">
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      class="h-16 w-16 text-base-content/20"
                      fill="none"
                      viewBox="0 0 24 24"
                      stroke="currentColor"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="1"
                        d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"
                      />
                    </svg>
                  </div>
                )}
              </div>
            </figure>
            <div class="card-body p-4 pt-3 text-center">
              <h3 class="text-base md:text-lg font-medium">
                {member.data.name.split(' ')[0]}
              </h3>
              <div class="flex justify-center">
                <span class="badge badge-primary badge-sm">
                  {member.data.role}
                </span>
              </div>
            </div>
          </a>
        ))
      }
    </div>

    <div class="text-center mt-10">
      <a href="/team" class="btn btn-primary gap-2">
        Les mer om spillerne
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="h-4 w-4"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
          stroke-width="2"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M17 8l4 4m0 0l-4 4m4-4H3"></path>
        </svg>
      </a>
    </div>
  </div>
</section>
